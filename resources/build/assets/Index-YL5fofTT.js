import{d as g,h as V,o as f,i as _,w as a,r as w,a as s,u as e,j as ye,p as y,n as j,l as z,c as b,e as u,v as E,C as F,m as he,b as d,F as T,M as J,g as D,t as v,f as be,Y as H}from"./app-_9kzSgCd.js";import{_ as $e}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DLdSCyf_.js";import{a6 as xe,a7 as Ce,a8 as ke,a9 as Se,aa as Ve,ab as Ue,ac as Pe,ad as Ee}from"./index-C4-kCFGI.js";import{c as h}from"./utils-DnNDQBbQ.js";import{c as A}from"./createLucideIcon-C0z2eStt.js";import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang-Cb8Cgy_Z.js";import{C as De}from"./chevron-right-B2dRl8b2.js";import{C as Me}from"./chevron-left-DYqn3cAP.js";import{c as Be}from"./index-Bb4qSo10.js";import{c as Fe,_ as Ie,a as Le,b as Ne}from"./CardContent.vue_vue_type_script_setup_true_lang-BSyeVcy_.js";import{_ as Te}from"./CardDescription.vue_vue_type_script_setup_true_lang-CBbmCcX1.js";import{c as Re,_ as je,b as ze,a as M}from"./DropdownMenuItem.vue_vue_type_script_setup_true_lang-D2QFcvIo.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-D4u-QKuK.js";import{d as K,c as Q,_ as X,a as Z,b as ee}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DOjQBhRS.js";import{_ as k}from"./Label.vue_vue_type_script_setup_true_lang-5JRT5roC.js";import{_ as R}from"./InputError.vue_vue_type_script_setup_true_lang-CwJq6Wzb.js";import{S as Ae}from"./search-CHHlvPcq.js";import"./ApplicationLogo-BFzXDb36.js";import"./index-BrYsjqUf.js";import"./chevron-down-DI_poV6y.js";import"./index-BZcJKHnx.js";/**
 * @license lucide-vue-next v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=A("ChevronsLeftIcon",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-vue-next v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=A("ChevronsRightIcon",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-vue-next v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=A("CirclePlusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-vue-next v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=A("EllipsisIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),We=g({__name:"PaginationEllipsis",props:{asChild:{type:Boolean},as:{},class:{}},setup(c){const o=c,i=V(()=>{const{class:p,...m}=o;return m});return(p,m)=>(f(),_(e(xe),ye(i.value,{class:e(h)("w-9 h-9 flex items-center justify-center",o.class)}),{default:a(()=>[w(p.$slots,"default",{},()=>[s(e(ae))])]),_:3},16,["class"]))}}),Ye=g({__name:"PaginationFirst",props:{asChild:{type:Boolean,default:!0},as:{},class:{}},setup(c){const o=c,i=V(()=>{const{class:p,...m}=o;return m});return(p,m)=>(f(),_(e(Ce),j(z(i.value)),{default:a(()=>[s(e(x),{class:y(e(h)("w-10 h-10 p-0",o.class)),variant:"outline"},{default:a(()=>[w(p.$slots,"default",{},()=>[s(e(Oe),{class:"h-4 w-4"})])]),_:3},8,["class"])]),_:3},16))}}),Ge=g({__name:"PaginationLast",props:{asChild:{type:Boolean,default:!0},as:{},class:{}},setup(c){const o=c,i=V(()=>{const{class:p,...m}=o;return m});return(p,m)=>(f(),_(e(ke),j(z(i.value)),{default:a(()=>[s(e(x),{class:y(e(h)("w-10 h-10 p-0",o.class)),variant:"outline"},{default:a(()=>[w(p.$slots,"default",{},()=>[s(e(qe),{class:"h-4 w-4"})])]),_:3},8,["class"])]),_:3},16))}}),Je=g({__name:"PaginationNext",props:{asChild:{type:Boolean,default:!0},as:{},class:{}},setup(c){const o=c,i=V(()=>{const{class:p,...m}=o;return m});return(p,m)=>(f(),_(e(Se),j(z(i.value)),{default:a(()=>[s(e(x),{class:y(e(h)("w-10 h-10 p-0",o.class)),variant:"outline"},{default:a(()=>[w(p.$slots,"default",{},()=>[s(e(De),{class:"h-4 w-4"})])]),_:3},8,["class"])]),_:3},16))}}),Ke=g({__name:"PaginationPrev",props:{asChild:{type:Boolean,default:!0},as:{},class:{}},setup(c){const o=c,i=V(()=>{const{class:p,...m}=o;return m});return(p,m)=>(f(),_(e(Ve),j(z(i.value)),{default:a(()=>[s(e(x),{class:y(e(h)("w-10 h-10 p-0",o.class)),variant:"outline"},{default:a(()=>[w(p.$slots,"default",{},()=>[s(e(Me),{class:"h-4 w-4"})])]),_:3},8,["class"])]),_:3},16))}}),se=g({__name:"Badge",props:{variant:{},class:{}},setup(c){const o=c;return(i,p)=>(f(),b("div",{class:y(e(h)(e(Qe)({variant:i.variant}),o.class))},[w(i.$slots,"default")],2))}}),Qe=Be("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),Xe={class:"relative w-full overflow-auto"},Ze=g({__name:"Table",props:{class:{}},setup(c){const o=c;return(i,p)=>(f(),b("div",Xe,[u("table",{class:y(e(h)("w-full caption-bottom text-sm",o.class))},[w(i.$slots,"default")],2)]))}}),es=g({__name:"TableBody",props:{class:{}},setup(c){const o=c;return(i,p)=>(f(),b("tbody",{class:y(e(h)("[&_tr:last-child]:border-0",o.class))},[w(i.$slots,"default")],2))}}),L=g({__name:"TableCell",props:{class:{}},setup(c){const o=c;return(i,p)=>(f(),b("td",{class:y(e(h)("p-4 align-middle [&:has([role=checkbox])]:pr-0",o.class))},[w(i.$slots,"default")],2))}}),N=g({__name:"TableHead",props:{class:{}},setup(c){const o=c;return(i,p)=>(f(),b("th",{class:y(e(h)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",o.class))},[w(i.$slots,"default")],2))}}),ss=g({__name:"TableHeader",props:{class:{}},setup(c){const o=c;return(i,p)=>(f(),b("thead",{class:y(e(h)("[&_tr]:border-b",o.class))},[w(i.$slots,"default")],2))}}),te=g({__name:"TableRow",props:{class:{}},setup(c){const o=c;return(i,p)=>(f(),b("tr",{class:y(e(h)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",o.class))},[w(i.$slots,"default")],2))}}),ts={class:"py-12"},as={class:"flex min-h-screen w-full flex-col"},ls={class:"flex flex-col sm:gap-4 sm:py-4 sm:pl-14"},os={class:"sticky top-0 z-30 flex h-14 items-center gap-4 border-b bg-background px-4 sm:static sm:h-auto sm:border-0 sm:bg-transparent sm:px-6"},rs={class:"relative ml-auto flex-1 md:grow-0"},ns={class:"grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8"},is={class:"flex justify-end mb-4"},ds={class:"mt-4"},us={class:"grid gap-4 py-4"},cs={class:"grid grid-cols-4 items-center gap-4"},ps={class:"col-span-3"},fs={class:"grid grid-cols-4 items-center gap-4"},ms={class:"col-span-3"},_s={class:"grid grid-cols-4 items-center gap-4"},gs={class:"col-span-3"},vs={class:"grid grid-cols-4 items-center gap-4"},ws={class:"col-span-3"},ys={class:"grid gap-4 py-4"},hs={class:"grid grid-cols-4 items-center gap-4"},bs={class:"col-span-3"},$s={class:"grid grid-cols-4 items-center gap-4"},xs={class:"col-span-3"},Cs={class:"grid grid-cols-4 items-center gap-4"},ks={class:"col-span-3"},Ss={class:"grid grid-cols-4 items-center gap-4"},Vs={class:"col-span-3"},Js=g({__name:"Index",props:{users:Object},setup(c){const o=c,i=E(""),p=E(!1),m=E(!1),U=E(!1),S=E(null),P=E(""),l=F({id:null,name:"",email:"",password:"",password_confirmation:""}),le=F({}),O=()=>{console.log("Password:",l.password),console.log("Password Confirmation:",l.password_confirmation),console.log("Are equal?:",l.password===l.password_confirmation),(l.password||l.password_confirmation)&&l.password!==l.password_confirmation?P.value="The password confirmation does not match.":P.value=""},oe=V(()=>{const r=l.name&&l.email;if(U.value){const t=!l.password&&!l.password_confirmation||l.password&&l.password===l.password_confirmation;return r&&t}else{const t=l.password&&l.password_confirmation&&l.password===l.password_confirmation;return r&&t}}),q=()=>{p.value=!1,l.reset(),P.value=""};V(()=>i.value?o.users.filter(r=>r.name.toLowerCase().includes(i.value.toLowerCase())||r.email.toLowerCase().includes(i.value.toLowerCase())):o.users);const re=r=>{H.get(route("admin.users.index"),{page:r,search:i.value},{preserveState:!0,preserveScroll:!0,replace:!0})},ne=()=>{H.get(route("admin.users.index"),{search:i.value,page:1},{preserveState:!0,replace:!0})},ie=()=>{U.value=!1,l.reset(),p.value=!0},de=r=>{U.value=!0,l.id=r.id,l.name=r.name,l.email=r.email,l.password="",l.password_confirmation="",p.value=!0},ue=r=>{S.value=r,m.value=!0},W=()=>{m.value=!1,S.value=null},ce=()=>{O(),!P.value&&(U.value?({...l},l.put(route("admin.users.update",l.id),{preserveScroll:!0,onSuccess:()=>q()})):l.post(route("admin.users.store"),{preserveScroll:!0,onSuccess:()=>q()}))},pe=F({}),fe=F({}),me=F({}),_e=r=>{confirm(`Are you sure you want to soft delete ${r.name}?`)&&pe.delete(route("admin.users.destroy",r.id),{preserveScroll:!0,preserveState:!1,onSuccess:()=>{console.log("User soft deleted successfully"),r.deleted_at=new Date().toISOString()},onError:t=>{console.error("Error soft deleting user:",t)}})},ge=r=>{confirm(`Are you sure you want to restore ${r.name}?`)&&fe.put(route("admin.users.restore",r.id),{},{preserveScroll:!0,preserveState:!1,onSuccess:()=>{console.log("User restored successfully"),r.deleted_at=null},onError:t=>{console.error("Error restoring user:",t)}})},ve=r=>{confirm(`Are you sure you want to permanently delete ${r.name}? This action cannot be undone.`)&&me.delete(route("admin.users.forceDelete",r.id),{preserveScroll:!0,preserveState:!1,onSuccess:()=>{console.log("User permanently deleted"),o.users.data=o.users.data.filter(t=>t.id!==r.id),o.users.total-=1,o.users.data.length===0&&o.users.current_page>1&&H.get(route("admin.users.index"),{page:o.users.current_page-1,search:i.value},{preserveState:!0,replace:!0})},onError:t=>{console.error("Error permanently deleting user:",t)}})},we=r=>{console.log("toggleVerification called for user:",r),console.log("Route:",route("admin.users.toggle-verification",r.id)),le.put(route("admin.users.toggle-verification",r.id),{},{preserveScroll:!0,preserveState:!1,onSuccess:()=>{console.log("Verification toggled successfully"),r.email_verified_at=r.email_verified_at?null:new Date().toISOString()},onError:t=>{console.error("Error toggling verification:",t)}})},Y=r=>new Date(r).toLocaleDateString();return(r,t)=>(f(),b(T,null,[s(e(he),{title:"User Management"}),s($e,null,{header:a(()=>t[5]||(t[5]=[u("h2",{class:"font-semibold text-xl leading-tight"},"User Management",-1)])),default:a(()=>[u("div",ts,[u("div",as,[u("div",ls,[u("header",os,[u("div",rs,[s(e(Ae),{class:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),s(e(I),{type:"search",placeholder:"Search users...",class:"w-full rounded-lg bg-background pl-8 md:w-[200px] lg:w-[320px]",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=n=>i.value=n),onInput:ne},null,8,["modelValue"])])]),u("main",ns,[s(e(Fe),null,{default:a(()=>[s(e(Ie),null,{default:a(()=>[s(e(Le),null,{default:a(()=>t[6]||(t[6]=[d("Users")])),_:1}),s(e(Te),null,{default:a(()=>t[7]||(t[7]=[d("Manage your users and their access.")])),_:1})]),_:1}),s(e(Ne),null,{default:a(()=>[u("div",is,[s(e(x),{onClick:ie,size:"sm",class:"h-9 gap-1"},{default:a(()=>[s(e(He),{class:"h-4 w-4"}),t[8]||(t[8]=u("span",null,"Add User",-1))]),_:1})]),s(e(Ze),null,{default:a(()=>[s(e(ss),null,{default:a(()=>[s(e(te),null,{default:a(()=>[s(e(N),null,{default:a(()=>t[9]||(t[9]=[d("Name")])),_:1}),s(e(N),null,{default:a(()=>t[10]||(t[10]=[d("Email")])),_:1}),s(e(N),null,{default:a(()=>t[11]||(t[11]=[d("Status")])),_:1}),s(e(N),null,{default:a(()=>t[12]||(t[12]=[d("Created at")])),_:1}),s(e(N),null,{default:a(()=>t[13]||(t[13]=[d("Actions")])),_:1})]),_:1})]),_:1}),s(e(es),null,{default:a(()=>[(f(!0),b(T,null,J(c.users.data,n=>(f(),_(e(te),{key:n.id,class:y({"opacity-50":n.deleted_at})},{default:a(()=>[s(e(L),{class:"font-medium"},{default:a(()=>[d(v(n.name),1)]),_:2},1024),s(e(L),null,{default:a(()=>[d(v(n.email),1)]),_:2},1024),s(e(L),null,{default:a(()=>[s(e(se),{variant:n.email_verified_at?"outline":"secondary"},{default:a(()=>[d(v(n.email_verified_at?"Verified":"Unverified"),1)]),_:2},1032,["variant"])]),_:2},1024),s(e(L),null,{default:a(()=>[d(v(Y(n.created_at)),1)]),_:2},1024),s(e(L),null,{default:a(()=>[s(e(Re),null,{default:a(()=>[s(e(je),{"as-child":""},{default:a(()=>[s(e(x),{size:"icon",variant:"ghost"},{default:a(()=>[s(e(ae),{class:"h-4 w-4"}),t[14]||(t[14]=u("span",{class:"sr-only"},"Open menu",-1))]),_:1})]),_:1}),s(e(ze),{align:"end"},{default:a(()=>[n.deleted_at?D("",!0):(f(),_(e(M),{key:0,onClick:$=>de(n)},{default:a(()=>t[15]||(t[15]=[d("Edit")])),_:2},1032,["onClick"])),s(e(M),{onClick:$=>ue(n)},{default:a(()=>t[16]||(t[16]=[d("View")])),_:2},1032,["onClick"]),n.id!==r.$page.props.auth.user.id&&!n.deleted_at?(f(),_(e(M),{key:1,onClick:$=>we(n)},{default:a(()=>[d(v(n.email_verified_at?"Unverify":"Verify"),1)]),_:2},1032,["onClick"])):D("",!0),n.id!==r.$page.props.auth.user.id&&!n.deleted_at?(f(),_(e(M),{key:2,onClick:$=>_e(n)},{default:a(()=>t[17]||(t[17]=[d(" Soft Delete ")])),_:2},1032,["onClick"])):D("",!0),n.deleted_at?(f(),_(e(M),{key:3,onClick:$=>ge(n)},{default:a(()=>t[18]||(t[18]=[d(" Restore ")])),_:2},1032,["onClick"])):D("",!0),n.id!==r.$page.props.auth.user.id?(f(),_(e(M),{key:4,onClick:$=>ve(n)},{default:a(()=>t[19]||(t[19]=[d(" Permanently Delete ")])),_:2},1032,["onClick"])):D("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1}),u("div",ds,[c.users.total>c.users.per_page?(f(),_(e(Pe),{key:0,total:c.users.total,"sibling-count":1,"show-edges":"","default-page":c.users.current_page,onChange:re},{default:a(({page:n})=>[s(e(Ue),{class:"flex items-center gap-1"},{default:a(({items:$})=>[s(e(Ye)),s(e(Ke)),(f(!0),b(T,null,J($,(C,B)=>(f(),b(T,null,[C.type==="page"?(f(),_(e(Ee),{key:B,value:C.value,"as-child":""},{default:a(()=>[s(e(x),{class:"w-10 h-10 p-0",variant:C.value===n?"default":"outline"},{default:a(()=>[d(v(C.value),1)]),_:2},1032,["variant"])]),_:2},1032,["value"])):(f(),_(e(We),{key:C.type,index:B},null,8,["index"]))],64))),256)),s(e(Je)),s(e(Ge))]),_:2},1024)]),_:1},8,["total","default-page"])):D("",!0)])]),_:1})]),_:1})]),_:1})])])])]),s(e(K),{open:p.value,"onUpdate:open":q},{default:a(()=>[s(e(Q),null,{default:a(()=>[s(e(X),null,{default:a(()=>[s(e(Z),null,{default:a(()=>[d(v(U.value?"Edit User":"Create User"),1)]),_:1})]),_:1}),u("form",{onSubmit:be(ce,["prevent"])},[u("div",us,[u("div",cs,[s(e(k),{for:"name",class:"text-right"},{default:a(()=>t[20]||(t[20]=[d("Name")])),_:1}),u("div",ps,[s(e(I),{id:"name",modelValue:e(l).name,"onUpdate:modelValue":t[1]||(t[1]=n=>e(l).name=n)},null,8,["modelValue"]),s(R,{message:e(l).errors.name,class:"mt-2"},null,8,["message"])])]),u("div",fs,[s(e(k),{for:"email",class:"text-right"},{default:a(()=>t[21]||(t[21]=[d("Email")])),_:1}),u("div",ms,[s(e(I),{id:"email",type:"email",modelValue:e(l).email,"onUpdate:modelValue":t[2]||(t[2]=n=>e(l).email=n)},null,8,["modelValue"]),s(R,{message:e(l).errors.email,class:"mt-2"},null,8,["message"])])]),u("div",_s,[s(e(k),{for:"password",class:"text-right"},{default:a(()=>[d(v(U.value?"New Password (optional)":"Password"),1)]),_:1}),u("div",gs,[s(e(I),{id:"password",type:"password",modelValue:e(l).password,"onUpdate:modelValue":t[3]||(t[3]=n=>e(l).password=n),onInput:O},null,8,["modelValue"]),s(R,{message:e(l).errors.password,class:"mt-2"},null,8,["message"])])]),u("div",vs,[s(e(k),{for:"password_confirmation",class:"text-right"},{default:a(()=>t[22]||(t[22]=[d("Confirm Password")])),_:1}),u("div",ws,[s(e(I),{id:"password_confirmation",type:"password",modelValue:e(l).password_confirmation,"onUpdate:modelValue":t[4]||(t[4]=n=>e(l).password_confirmation=n),onInput:O},null,8,["modelValue"]),s(R,{message:P.value,class:"mt-2"},null,8,["message"])])])]),s(e(ee),null,{default:a(()=>[s(e(x),{type:"submit",disabled:!oe.value},{default:a(()=>t[23]||(t[23]=[d("Save")])),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),s(e(K),{open:m.value,"onUpdate:open":W},{default:a(()=>[s(e(Q),null,{default:a(()=>{var n,$,C,B;return[s(e(X),null,{default:a(()=>[s(e(Z),null,{default:a(()=>t[24]||(t[24]=[d("User Details")])),_:1})]),_:1}),u("div",ys,[u("div",hs,[s(e(k),{class:"text-right font-bold"},{default:a(()=>t[25]||(t[25]=[d("Name:")])),_:1}),u("span",bs,v((n=S.value)==null?void 0:n.name),1)]),u("div",$s,[s(e(k),{class:"text-right font-bold"},{default:a(()=>t[26]||(t[26]=[d("Email:")])),_:1}),u("span",xs,v(($=S.value)==null?void 0:$.email),1)]),u("div",Cs,[s(e(k),{class:"text-right font-bold"},{default:a(()=>t[27]||(t[27]=[d("Status:")])),_:1}),u("span",ks,[s(e(se),{variant:(C=S.value)!=null&&C.email_verified_at?"outline":"secondary"},{default:a(()=>{var G;return[d(v((G=S.value)!=null&&G.email_verified_at?"Verified":"Unverified"),1)]}),_:1},8,["variant"])])]),u("div",Ss,[s(e(k),{class:"text-right font-bold"},{default:a(()=>t[28]||(t[28]=[d("Created at:")])),_:1}),u("span",Vs,v(Y((B=S.value)==null?void 0:B.created_at)),1)])]),s(e(ee),null,{default:a(()=>[s(e(x),{onClick:W},{default:a(()=>t[29]||(t[29]=[d("Close")])),_:1})]),_:1})]}),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{Js as default};
